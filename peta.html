<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery1.min.js"></script>
    <script src="js/bootstrap1.min.js"></script>

    <meta charset=utf-8/>
    <title>Atlas Babad Tanah Jawi</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <script src='js/mapbox.js'></script>
    <link href='css/mapbox.css' rel='stylesheet'/>

    <!--link external css dan javascript-->
    <link rel="stylesheet" type="text/css" href="css/babad.css">
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <!--<div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#"></a>
        </div>
        <ul class="nav navbar-nav">
            <li class="active"><a href="index.html">Home</a></li>
            <li><a href="#Silsilah">Masa Pra</a></li>
            <li><a href="#Peralihan Kekuasaan">Masa Kejayaan</a></li>
            <li><a href="#Pasca Sultan Agung">Masa Keruntuhan</a></li>
        </ul>
   </div>-->
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Dropdown Example
            <span class="caret"></span></button>
        <ul class="dropdown-menu">
            <li><a href="#">HTML</a>
            <ul><li><a href="#Silsilah">Silsilah</a></li></ul></li>
            <li><a href="#">CSS</a></li>
            <li><a href="#">JavaScript</a></li>
        </ul>
    </div>
</nav>


<div class="container" >
    <div id='map' class="col-sm-8"></div>

    <div id='cover' class='cover active col-sm-4'>
        <h2>Atlas Babad Tanah Jawi</h2>
        <p>by Sheila Amalia Burhanudin</p>
        <small class='scroll quiet'>Scroll &#x25BE;</small>
    </div>

    <article id='narrative'>
        <div class='sections prose col-sm-4'>


            <!--Masa Pra Kekuasaan Mataram-->
            <section id='Silsilah'>
                <h3>Silsilah Kerajaan Mataram</h3>
                <img src="asset/01.jpg" class="fit">
                <p align="justify">Kesultanan Mataram adalah kerajaan Islam di Pulau Jawa yang pernah berdiri pada abad
                    ke-17. Kerajaan ini dipimpin suatu dinasti keturunan Ki Ageng Sela dan Ki Ageng Pemanahan.
                    <br> Asal-usul dimulainya kekuasaan Kesultanan Mataram disebutkan bahwa berkaitan erat dengan
                    Kesultanan Demak dan Kesultanan Pajang. Setelah Demak mengalami kemuduran, ibukotanya dipindahkan ke
                    Pajang.
                    <br><a href="#" role="button" class="btn popovers" data-toggle="popover" data-trigger="focus"
                           title="Silsilah Kerajaan Mataram"
                           data-content="Kesultanan Mataram adalah kerajaan Islam di Pulau Jawa yang pernah berdiri pada abad ke-17. Kerajaan ini dipimpin suatu dinasti keturunan Ki Ageng Sela dan Ki Ageng Pemanahan.
                            Asal-usul dimulainya kekuasaan Kesultanan Mataram disebutkan bahwa berkaitan erat dengan Kesultanan Demak dan Kesultanan Pajang. Setelah Demak mengalami kemuduran, ibukotanya dipindahkan ke Pajang. Kesultanan Pajang merupakan kerajaan besar di Jawa yang mempunyai beberapa daerah kekuasaan seperti:
                            Pajang, Madiun, Mataram, Pati, Prawata (Demak), Kalinyamat (Jepara), dan Jipang (Bojonegoro).
                            Silsilah tokoh pertama yang mengawali kekuasaan Kesultanan Mataram menurut Babad Tanah Djawi
                            dinamakan Silsilah Tertua. Silsilah Tertua akan digambarkan dalam bagan sebagai berikut:">Read
                        More..</a>
            </section>
            <section id='Ki Ageng Pemanahan'>
                <h3>Sosok Ki Ageng Pemanahan dan Perjalanan Ki Ageng Pemanahan </h3>
                <img src="asset/02.jpg" class="fit">
                <p align="justify">Ki Ageng Pemanahan adalah sosok pembuka Tanah Alas Mentaok (Mataram) yang akan
                    menjadi daerah asal muasal
                    berdirinya Kesultanan Mataram. Ki Ageng Pemanahan merupakan cucu dari Ki Ageng Sela dan putra dari
                    Ki Ageng
                    Ngenis. Ki Gede Pemanahan diberi nama sesuai dengan daerah yang dikuasakan kepadanya oleh Sultan
                    Hadiwijaya
                    pada saat itu. Daerah itu bernama Manahan, suatu daerah di sebelah barat Solo. Nama sebenarnya Ki
                    Gede
                    Pemanahan tidak disebutkan dalam Babad Tanah Djawi. Dari Sadjarah Dalem (Padmasoesastra, 1912) juga
                    dari Van
                    der Horst (1707) pernah disebutkan sebuah nama kecil yaitu Bagus Kacung</p>
                <p align="justify">Ki Ageng Pemanahan bersama dengan saudaranya, Ki Panjawi, mengabdi kepada Sultan
                    Hadiwijaya yang saat itu
                    merupakan Raja dari Kerajaan Pajang. Mereka memiliki paman bernama Ki Juru Martani sebagai penasehat
                    yang
                    bijaksana. Ketiga tokoh ini memiliki hubungan yang sangat erat dan merupakan orang-orang kepercayaan
                    Sultan
                    Hadiwijaya.</p>
            </section>
            <section id='Pemberontakan Arya'>
                <h3>Peristiwa Pemberontakan Arya Penangsang</h3>
                <img src="asset/03.jpg" class="fit">
                <p align="justify">Perjalanan Ki Ageng Pemanahan dimulai dari peperangan melawan Arya Penangsang. Arya
                    Penangsang merupakan Raja
                    Jipang yang ingin menjadi penguasa Tanah Jawa. Guru spritual Arya Penangsang, Sunan Kudus, berkata
                    bahwa untuk
                    menjadi penguasa Tanah Jawa harus menumpaskan Sultan Hadiwijaya. Arya Penangsang pun mencoba
                    membunuh Sultan
                    Hadiwijaya dengan mengirimkan utusan namun tidak berhasil. Arya Penangsang pun berniat akan membunuh
                    Sultan
                    Hadiwijaya dengan tangannya sendiri.</p>
                <p align="justify">Sultan Hadiwijaya yang mengetahui rencana Arya Penangsang pun membuat sayembara dan
                    berjanji kepada Ki Ageng
                    Pemanahan dan Ki Panjawi jika keduanya berhasil meredakan pemberontakan Arya Penangsang maka akan
                    mendapatkan
                    hadiah tanah Pati dan Alas Mentaok (Mataram). Sultan Hadiwijaya memilih tidak memerangi Arya
                    Penangsang
                    sendiri karena masih bersaudara dan merupakan bagian dari keluarga besar Kesultanan Demak. Ki Ageng
                    Pemanahan
                    dan Ki Panjawi pun menyanggupi dan bersedia mengikuti sayembara tersebut atas nasehat Ki Martani,
                    paman
                    sekaligus penasehat kerajaan Pajang. Perang terjadi di tepian Sungai Caket (Bengawan Solo). Perang
                    ini
                    dimenangkan oleh Ki Gede Pemanahan dan Ki Panjawi (cerita mendetil dapat dibaca dalam Babad
                    Pakualaman).</p>
            </section>
            <section id='Perjalanan Ki Ageng Pemanahan'>
                <h3>Perjalanan Ki Ageng Pemanahan</h3>
                <img src="asset/05.jpg" height="400" width="450">
                <p align="justify">Sultan Hadiwijaya harus menepati janjinya yaitu memberikan tanah Pati dan Alas
                    Mentaok kepada Ki Ageng
                    Pemanahan dan Ki Panjawi. Namun, Sultan Hadiwijaya tidak langsung memberikan tanah tersebut karena
                    khawatir
                    dengan ramalan yang dikeluarkan oleh Sunan Giri bahwa Mataram kelak akan menjadi kerajaan yang besar
                    yang
                    melebihi kebesaran Kerajaan Pajang. Hal tersebut membuat Sultan Hadiwijaya resah dan terus menunda
                    memberikan
                    tanah tersebut kepada Ki Ageng Pemanahan dan Ki Panjawi. Mengetahui kondisi tersebut, Sunan Kalijaga
                    yang juga
                    merupakan guru dari Sultan Hadiwijaya menjadi penengah dalam permasalahan tersebut. Sunan Kalijaga
                    meminta
                    Sultan Hadwijaya untuk memberikan tanah tersebut dengan alasan takdir tidak dapat direkayasa dan
                    membuat Ki
                    Ageng Pemanahan bersumpah akan setia kepada Sultan Hadiwijaya. Sultan Hadiwijaya akhirnya
                    menyerahkan tanah
                    Pati dan Alas Mentaok pada tahun 1556.</p>
                <p align="justify">Pada saat itu Alas Mentaok adalah hutan belantara bekas lokasi kerajaan pada masa
                    lalu yang sudah lama
                    ditinggalkan sedangkan Pati sudah menjadi kota dengan penduduk yang maju. Karena Ki Ageng Pemanahan
                    menghormati kakaknya, ia pun menawarkan Ki Panjawi untuk memilih Pati atau Alas Mentaok sebagai
                    tanahnya. Ki
                    Panjawi memilih Pati yang makmur dan Ki Ageng Pemanahan menerima tanah Alas Mentaok (Mataram) untuk
                    dirinya.
                    Setelah mendapatkan hadiah tanah Alas Mentaok (Mataram), Ki Ageng Pemanahan harus merambah hutan
                    belantara
                    untuk membuka daerah tersebut dan menjadikannya kota baru. Ia ditemani oleh Ki Juru Martani beserta
                    keluarga
                    dan pengikutnya pun berangkat dari Kerajaan Pajang ke Alas Mentaok (Mataram).</p>
                <p align="justify">Sedikit demi sedikit Alas Mentaok mulai memiliki penduduk yang mengisi daerah
                    tersebut dan Ki Ageng Pemanahan
                    mulai mendirikan istananya di atas tanah desa yang dipimpinnya (sekarang berlokasi di daerah
                    Kotagede, DI
                    Yogyakarta). Ki Ageng Pemanahan diberi gelar Ki Ageng Mataram. Ki Ageng Mataram wafat pada tahun
                    1584 dan
                    digantikan oleh putranya yang bernama Sutawijaya atau lebih dikenal dengan nama Panembahan
                    Senopati.</p>
            </section>
            <section id='Panembahan Senopati'>
                <h3>Masa Kekuasaan Panembahan Senopati</h3>
                <img src="asset/06.jpg" height="400" width="450">
                <p align="justify">Setelah Ki Ageng Mataram wafat, kekuasaan berpindah kepada putranya yang bernama
                    Sutawijaya. Sutawijaya yang
                    bergelar “Mas Ngabehi Loring Pasar” merupakan anak angkat Sultan Hadiwijaya, lalu diangkat oleh
                    Sultan sebagai
                    penguasa di wilayah Mataram menggantikan Ki Ageng Mataram. Sutawijaya bercita-cita untuk menguasai
                    Jawa dan
                    berusaha mewujudkan keinginannya dengan mulai mengumpulkan pengikut dari berbagai daerah.</p>
            </section>
            <section id="Perang">
                <b><i><h5>Perang antara Kerajaan Pajang dan Mataram </h5></i></b>
                <img src="asset/07.jpg" height="400" width="450">
                <p align="justify">Karena keinginannya menguasai Jawa, Sutawijaya tidak mau berkunjung ke Pajang dan
                    menghadap kepada Sultan
                    Hadiwijaya sesuai dengan kewajibannya. Keadaan ini dikarenakan ia merasa telah memiliki Tanah
                    Mataram yang
                    semakin makmur. Sutawijaya dianggap melawan dan memberontak kepada Kerajaan Pajang. Hal ini membuat
                    Sultan
                    Hadiwijaya marah yang kemudian menyerang Mataram. Penyerangan ini akhirnya menimbulkan perang di
                    antara
                    Kerajaan Pajang dan Mataram pada tahun 1587. Perang ini terjadi di Randulawang, yaitu daerah sekitar
                    Prambanan. Pasukan Pajang dapat dipukul mundur meskipun jumlah mereka jauh lebih banyak. Sultan
                    Hadiwijaya
                    jatuh sakit dalam perjalanan pulang ke Pajang. Ia akhirnya meninggal dunia namun sebelumnya sempat
                    berwasiat
                    agar anak-anaknya jangan ada yang membenci Senapati serta harus tetap memperlakukannya sebagai kakak
                    sulung.
                    Senapati sendiri ikut hadir dalam pemakaman ayah angkatnya itu.</p>
                <p align="justify">Pada tahun 1588, Mataram mulai berkembang menjadi kerajaan dengan Sutawijaya sebagai
                    raja pertamanya yang
                    bergelar Panembahan Senopati. Kerajaan Pajang yang sedang dipimpin oleh dan Pangeran Banowo
                    berwasiat untuk
                    menggabungkan Pajang dan Mataram. Kemudian, Pajang menjadi bawahan Mataram pada tahun 1590.</p>
                <p align="justify">Tahun-tahun berikutnya, Panembahan Senopati banyak melakukan penaklukan ke daerah
                    timur Jawa, hingga akhirnya
                    wilayah-wilayah penting seperti Jepara, Madiun, Kediri, Bojonegoro, dan sebagian Surabaya berada
                    dibawah
                    kekuasaan Mataram. Pada masa kekuasaannya, Panembahan Senopati telah membuat Mataram yang tadinya
                    hanya berupa
                    pemukiman kecil di pedalaman hingga menjadi kerajaan yang memiliki wilayah kekuasaan yang luas
                    meliputi daerah
                    di Jawa Tengah dan Jawa Timur.</p>
            </section>

            <!-- Masa Puncak Keemasan Mataram-->
            <section id='Sultan Agung'>
                <h3>Masa Kekuasaan Sultan Agung</h3>
                <img src="asset/08.jpg" height="400" width="450">
                <p align="justify">Pada tahun 1601 Panembahan Senopati wafat dan digantikan oleh putranya, Mas Jolang
                    yang bergelar Panembahan
                    Hanyokrowati setelah dilantik menjadi Raja Mataram. Masa kekuasaan Panembahan Hanyokrowati hanya
                    sebentar
                    karena kecelakaan saat berburu di hutan Krapyak yang merenggut nyawanya pada tahun 1613. Oleh karena
                    itu,
                    kemudian ia dikenal sebagai Panembahan Seda Ing Krapyak yang artinya raja yang meninggal di
                    Krapyak.</p>
                <p align="justify">Panembahan Hanyokrowati kemudian digantikan oleh putra bungsunya yaitu Adipati
                    Martapura. Kekuasaan Adipati
                    Martapura hanya sebentar lalu digantikan oleh kakak sulungnya (beda ibu) yang bernama Mas Rangsang.
                    Sebenarnya
                    secara teknis Raden Mas Rangsang adalah Sultan ke-empat Kesultanan Mataram, namun secara umum
                    dianggap sebagai
                    Sultan ketiga karena adiknya yang sakit diangkat sebagai raja hanya sebagai pemenuhan janji
                    ayahnya.</p>
                <p align="justify">Raden Mas Rangsang naik takhta pada tahun 1613 dalam usia 20 tahun menggantikan
                    Adipati Martapura, yang hanya
                    menjadi Sultan Mataram selama satu hari. Sesudah naik tahta Mas Rangsang mendapat gelar Sultan Agung
                    Prabu
                    Hanyokrokusumo atau lebih dikenal dengan sebutan Sultan Agung. Pada masa kekuasaan Sultan Agung
                    Kerajaan
                    Mataram sampai pada puncak kejayaannya. Ibu kota Mataram saat itu masih berada di Kota Gede. Pada
                    tahun 1614
                    mulai dibangun istana baru di desa Karta, sekitar 5 km di sebelah barat daya Kota Gede, yang kelak
                    mulai
                    ditempati pada tahun 1618. Sultan Agung mewujudkan dan mempertahankan kejayaan melalui upaya
                    militer,
                    administrasi negara yang baik, kebudayaan, agama dan kepercayaan serta penggunaan media.</p>
            </section>
            <section id='Ekspansi Wilayah'>
                <h3>Ekspansi wilayah Kerajaan Mataram</h3>
                <img src="asset/09.jpg" height="400" width="450">
                <p align="justify">Dalam pemerintahannya, Sultan Agung banyak melakukan ekspansi ke beberapa wilayah di
                    Jawa dalam rangka
                    perluasan wilayah kerajaan Mataram. Ia melakukan penaklukan wilayah dengan menggunakan taktik
                    penyerangan
                    secara militer maupun politik.</p>
                <p align="justify">Pada masa kekuasaan Sultan Agung, seluruh daerah di Jawa hampir berhasil dikuasai
                    oleh Mataram kecuali Banten karena
                    terhalang oleh Batavia yang tidak berhasil ditaklukkan. Pada masa itu, Batavia masih diduduki
                    militer VOC
                    Belanda. Sultan Agung dan pasukannya mencoba menaklukan daerah Batavia namun gagal.</p>
            </section>
            <section id="Penaklukan Wirasaba">
                <h3>Penaklukan Wirasaba (1615)</h3>
            </section>
            <section id="Penaklukan Surabaya">
                <h3>Penaklukan Surabaya dan Madura(1620-1625)</h3>
            </section>
            <section id="Penaklukan Batavia">
                <h3>Penaklukan Wirasaba (1615)</h3>
            </section>
            <!--Masa Perpecahan dan Keruntuhan Mataram-->
            <section id='Pasca Sultan Agung'>
                <h3>Pasca Kekuasaan Sultan Agung</h3>
                <p align="justify">Pada tahun 1645 Sultan Agung wafat dan dimakamkan di Imogiri, ia digantikan oleh
                    putranya yg bergelar
                    Amangkurat (Amangkurat I). Amangkurat I memindahkan lokasi keraton ke Pleret (1647), tidak jauh dari
                    Kerta.
                    Selain itu, ia tidak lagi
                    menggunakan gelar sultan, melainkan "sunan" (dari "Susuhunan" atau "Yang Dipertuan"). Pemerintahan
                    Amangkurat
                    I kurang stabil karena banyak ketidakpuasan dan pemberontakan. Pada masanya, terjadi pemberontakan
                    besar yang
                    dipimpin oleh Trunajaya dan memaksa Amangkurat bersekutu dengan VOC. Ia wafat di Tegalarum (1677)
                    ketika
                    mengungsi sehingga dijuluki Sunan Tegalarum. Penggantinya, Amangkurat II (Amangkurat Amral), sangat
                    patuh pada
                    VOC sehingga kalangan istana banyak yang tidak puas dan pemberontakan terus terjadi. Pada masanya,
                    kraton
                    dipindahkan lagi ke Kartasura (1680), sekitar 5km sebelah barat Pajang karena kraton yang lama
                    dianggap telah
                    tercemar.</p>
                <p align="justify">Pengganti Amangkurat II berturut-turut adalah Amangkurat III (1703-1708), Pakubuwana
                    I (1704-1719),
                    Amangkurat IV (1719-1726), Pakubuwana II (1726-1749). VOC tidak menyukai Amangkurat III karena
                    menentang VOC
                    sehingga VOC mengangkat Pakubuwana I (Puger) sebagai raja. Akibatnya Mataram memiliki dua raja dan
                    ini
                    menyebabkan perpecahan internal. Amangkurat III memberontak dan menjadi "king in exile" hingga
                    tertangkap di
                    Batavia lalu dibuang ke Ceylon.</p>
            </section>
            <section id='Perpecahan'>
                <h3>Perpecahan Mataram</h3>
                <img src="asset/10.jpg" height="400" width="450">
                <p align="justify">Kekacauan politik baru dapat diselesaikan pada masa Pakubuwana III setelah pembagian
                    wilayah Mataram menjadi
                    dua yaitu Kesultanan Ngayogyakarta dan Kasunanan Surakarta tanggal 13 Februari 1755. Pembagian
                    wilayah ini
                    tertuang dalam Perjanjian Giyanti (nama diambil dari lokasi penandatanganan, di sebelah timur kota
                    Karanganyar, Jawa Tengah). Berakhirlah era Mataram sebagai satu kesatuan politik dan wilayah.
                    Walaupun
                    demikian sebagian masyarakat Jawa beranggapan bahwa Kesultanan Yogyakarta dan Kasunanan Surakarta
                    adalah "ahli
                    waris" dari Kesultanan Mataram. Kesultanan Yogyakarta diperintah oleh Raja Mangkubumi yang diberi
                    gelar
                    Hamengkubuwono I, sedangkan Kasuhunan Surakarta diperintah oleh Susuhunan Pakubuwono II.</p>
                <p align="justify">Pada tahun 1757, berdasarkan Perjanjian Salatiga, Kerajaan Mataram dibagi menjadi
                    tiga, yaitu Kesultanan
                    Yogyakarta, Kasunanan Surakarta dan Mangkunegaran. Daerah Mangkunegaran diperintah oleh Mas Said
                    yang diberi
                    gelar Pangeran Adipati Arya Mangkunegaran.
                    <br>Pada tahun 1813 Kesultanan Yogyakarta dibagi menjadi dua kerajaan, yaitu kesultanan Yogyakarta
                    dan
                    Kerajaan Pakualaman, yang diperintah oleh Paku Alam yang semula adalah Adipati Kesultanan
                    Yogyakarta. Dengan
                    demikian Kerajaan Mataram dibagi menjadi empat kerajaan kecil, yaitu Kesultanan Yogyakarta,
                    Kasunanan
                    Surakarta, Kerajaan Mangkunegaran dan Kerajaan Pakualaman.</p>
                <small class='colophon'>
                    Adapted from <a href='http://www.gutenberg.org/files/2346/2346-h/2346-h.htm'>Project Gutenberg</a>
                </small>
            </section>
        </div>
    </article>

    <script>
     var tinggi= $('#cover').height()
     console.log(tinggi)
        $('#Silsilah').css('padding-top', tinggi+10)

        L.mapbox.accessToken = 'pk.eyJ1Ijoic2hlaWxhYW1hbGlhIiwiYSI6IkNiTmdlQ1kifQ.AQMh0TeJoFX1TyKDObxvxw';

        // Replace 'mapbox.streets' with your map id.
        var mapboxTiles = L.tileLayer('https://api.mapbox.com/v4/sheilaamalia.3a8b5445/{z}/{x}/{y}.png?access_token=' + L.mapbox.accessToken, {
            attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });
        var map = L.map('map', {zoomControl: false, dragging: true})
                .addLayer(mapboxTiles)
                .setView([42.3610, -71.0587], 15);
        // In this case, we just hardcode data into the file. This could be dynamic.
        // The important part about this data is that the 'id' property matches
        // the HTML above - that's how we figure out how to link up the
        // map and the data.
        var poligon = L.mapbox.featureLayer('sheilaamalia.pn4knc8g');

        // When the features are loaded, make sure
        // the basemap display's the same geographical coordinates.
        poligon.on('ready', function() {
            map.fitBounds(poligon.getBounds());
        });
        var places = {
            type: 'FeatureCollection', features: [
                {
                    geometry: {type: "Point", coordinates: [110.3979005724011, -7.818922576191321]},
                    properties: {id: "cover", zoom: 9}, type: 'Feature'
                },

                /* Lokasi kerajaan pajang*/
                {
                    geometry: {type: "Point", coordinates: [110.78510284423828, -7.57020308036945]},
                    properties: {id: "Silsilah", title: 'Kerajaan Pajang', zoom: 10}, type: 'Feature'
                },
                /* Manahan*/
                {
                    geometry: {type: "Point", coordinates: [110.79917907714844, -7.553760553787121]},
                    properties: {id: "Ki Ageng Pemanahan", title: 'Alas Mentaok', zoom: 10}, type: 'Feature'
                },

                {
                    geometry: {type: "Point", coordinates: [110.8810142608296, -7.52067394620045]},
                    properties: {id: "Pemberontakan Arya", title: 'Bengawan Solo', zoom: 10}, type: 'Feature'
                },

                /*Perjalanan Ki Ageng Pemanahan*/
                {
                    geometry: {type: "Point", coordinates: [110.78510284423828, -7.57020308036945]},
                    properties: {id: "Perjalanan Ki Ageng Pemanahan", title: 'Kerajaan Pajang', zoom: 10},
                    type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [110.50048828124999, -7.763382015212087]},
                    properties: {id: "Perjalanan Ki Ageng Pemanahan", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [110.45997619628906, -7.816786243917258]},
                    properties: {id: "Perjalanan Ki Ageng Pemanahan", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [110.3979005724011, -7.818922576191321]},
                    properties: {id: "Perjalanan Ki Ageng Pemanahan", title: 'Alas Mentaok', zoom: 10}, type: 'Feature'
                },

                {
                    geometry: {type: "Point", coordinates: [110.4917533444782, -7.755077591137338]},
                    properties: {id: "Panembahan Senopati"}, type: 'Feature'
                },

                {
                    geometry: {type: "Point", coordinates: [-0.10669358, 51.51433123]},
                    properties: {id: "Peralihan Kekuasaan"}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [110.36385457846291, -7.811075792098948]},
                    properties: {id: "Sultan Agung", title: 'Karta'}, type: 'Feature'
                },
           /*     {
                    geometry: {type: "Point", coordinates: [-0.12416858, 51.50779757]},
                    properties: {id: "Ekspansi Wilayah"}, type: 'Feature'
                },
*/
                /*Penaklukan wirasaba*/
                {
                    geometry: {type: "Point", coordinates: [110.3979096553837, -7.818913543993155]},
                    properties: {id: "Penaklukan Wirasaba", title: "Mataram", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [111.52996466383171, -7.63684701124045]},
                    properties: {id: "Penaklukan Wirasaba", title: "Madiun", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [111.4666010928473, -7.868128765687112]},
                    properties: {id: "Penaklukan Wirasaba", title: "Ponorogo", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [112.3695354041898, -7.620324696087433]},
                    properties: {id: "Penaklukan Wirasaba", title: "Wirasaba", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [112.75278535294819, -7.262863721473984]},
                    properties: {id: "Penaklukan Wirasaba", title: "Surabaya", zoom: 10}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [113.2862636763271, -7.098982756640988]},
                    properties: {id: "Penaklukan Wirasaba", title: "Madura", zoom: 10}, type: 'Feature'
                },
                /*Penaklukan Suarabaya*/
                {
                    geometry: {type: "Point", coordinates: [-0.12416858, 51.50779757]},
                    properties: {id: "Penaklukan Surabaya"}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [-0.12416858, 51.50779757]},
                    properties: {id: "Pasca Sultan Agung"}, type: 'Feature'
                },
                {
                    geometry: {type: "Point", coordinates: [-0.12416858, 51.50779757]},
                    properties: {id: "Perpecahan"}, type: 'Feature'
                }
            ]
        };

        new L.Control.Zoom({position: 'bottomright'}).addTo(map);

        var placesLayer = L.mapbox.featureLayer(places)
                .addTo(map);

         /*placesLayer.eachLayer(function (layer) {
             var content = "tet";
             layer.bindPopup(content)
         });
*/
     console.log(placesLayer);

        var narrative = document.getElementById('narrative'),
                sections = narrative.getElementsByTagName('section'),
                currentId = '';

        setId('cover');

        var line_points = [[-7.57020308036945, 110.78510284423828], [-7.763382015212087, 110.50048828124999,],[-7.816786243917258, 110.45997619628906, ],[-7.818922576191321, 110.3979005724011,]];

        var polyline_options = {
            color: '#000'
        };
        var polyline1 = L.polyline(line_points, polyline_options);

        function setId(newId) {

            if (newId === currentId) return;

            placesLayer.eachLayer(function (layer) {
                if (layer.feature.properties.id === newId) {
                    map.addLayer(layer);
                    map.setView(layer.getLatLng(), layer.feature.properties.zoom || 14);
                    layer.setIcon(L.mapbox.marker.icon({
                        'marker-color': '#99d8c9'
                    }));
                }
                else {
                    map.removeLayer(layer);
                }
            });



            if(newId=="Silsilah"){
                map.addLayer(poligon);
                map.removeLayer(polyline1)
            }/*
            else if(newId=="ekspansi"){
                map.removeLayer(poligonSilsilah);
                map.removeLayer(poligonX);
                map.addLayer(poligonEkspansi);
            }
            else if(newId=="x"){
                map.removeLayer(poligonSilsilah);
                map.addLayer(poligonX);
                map.removeLayer(poligonEkspansi);
            }*/
            else if (newId=="Perjalanan Ki Ageng Pemanahan"){
                polyline1.addTo(map);
            }
            else{
                map.removeLayer(poligon);

                console.log(map.hasLayer(polyline1))
                if(map.hasLayer(polyline1)){
                    map.removeLayer(polyline1);
                }
            }
            // Here we load the features.json from another project
            // to use with the map initialized above
            /*var start = { x: 110.3979096553837, y: -7.818913543993155 };
            var end = { x: 111.52996466383171, y: -7.63684701124045 };
            var generator = new arc.GreatCircle(start, end, { name: 'coba' });
            var line = generator.Arc(100, { offset: 10 });
            L.geoJson(line.json()).addTo(map);*/
           /* var marker = e.layer,
                    feature = marker.feature;
            var content = '<h2>'+ layer.feature.properties.title+'<\/h2>' + '<img src="'+ layer.feature.properties.image+'" alt="">';
            marker.bindPopup(content);
*/


            /*open popup*/
            /*map.featureLayer.on('ready', function(e) {
                document.getElementById('open-popup').onclick = clickButton;
            });
            function clickButton() {
                map.featureLayer.eachLayer(function(marker) {
                    // You can replace this test for anything else, to choose the right
                    // marker on which to open a popup. by default, popups are exclusive
                    // so opening a new one will close all of the others.
                    if (marker.feature.properties.title === 'Capital Pride Parade') {
                        marker.openPopup();
                    }
                });
            }*/
            /*open popup*/

            // highlight the current section
            for (var i = 0; i < sections.length; i++) {
                sections[i].className = sections[i].id === newId ? 'active' : '';
            }
            // And then set the new id as the current one,
            // so that we know to do nothing at the beginning
            // of this function if it hasn't changed between calls
            currentId = newId;
        }

        // If you were to do this for real, you would want to use
        // something like underscore's _.debounce function to prevent this
        // call from firing constantly.
        narrative.onscroll = function (e) {
            var narrativeHeight = narrative.offsetHeight;
            var newId = currentId;
            // Find the section that's currently scrolled-to.
            // We iterate backwards here so that we find the topmost one.

            /*section akan berpindah menjadi id baru apabila telah melewati batas panjang section sebelumnya*/
            for (var i = sections.length - 1; i >= 0; i--) {
                var rect = sections[i].getBoundingClientRect();
                if (rect.top >= 0 && rect.top <= narrativeHeight) {
                    newId = sections[i].id;
                }
            }

            setId(newId);
        };
        $(function () {
            $('[data-toggle="popover"]').popover()
        })
    </script>
</div>
</body>
</html>